{% load static %}
<!DOCTYPE html>

<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>{% block title %}{% endblock title %}</title>
      
    <!-- theme meta -->
    <meta name="theme-name" content="mono" />

    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Karla:400,700|Roboto" rel="stylesheet">
    <link href="{% static 'plugins/material/css/materialdesignicons.min.css' %}" rel="stylesheet" />
    <link href="{% static 'plugins/simplebar/simplebar.css' %}" rel="stylesheet" />

    <!-- PLUGINS CSS STYLE -->
    <link href="{% static 'plugins/nprogress/nprogress.css' %}" rel="stylesheet" />
    <link href="{% static 'plugins/DataTables/DataTables-1.10.18/css/jquery.dataTables.min.css' %}" rel="stylesheet" />
    <link href="{% static 'plugins/jvectormap/jquery-jvectormap-2.0.3.css' %}" rel="stylesheet" />
    <link href="{% static 'plugins/daterangepicker/daterangepicker.css' %}" rel="stylesheet" />
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link href="{% static 'plugins/toaster/toastr.min.css' %}" rel="stylesheet" />

    <!--for multiple select-->
    <link href="{% static 'plugins/prism/prism.css' %}" rel="stylesheet" />
    <link href="{% static 'plugins/select2/css/select2.min.css' %}" rel="stylesheet" />
  
    <!-- MONO CSS -->
    <link id="main-css-href" rel="stylesheet" href="{% static 'css/style.css' %}" />

    <!-- FAVICON -->
    <link href="{% static 'images/glacierlogo.png' %}" rel="shortcut icon" />
    <script src="{% static 'plugins/nprogress/nprogress.js' %}"></script>

    <!--fontaswome kit-->
    <script src="https://kit.fontawesome.com/5893ed3d0d.js" crossorigin="anonymous"></script>

    <!-- for date picker -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment/min/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>



    <style>
      .copyright {
        /*padding: 5px 10px;  /* Reduce padding */
        height: 40px; /* Adjust height */
        font-size: 14px; /* Optional: Reduce text size if needed */
        line-height: 1.2; /* Adjust line height */
    }
      {% block style %}{% endblock %}
    </style> 

  </head>

  <body class="navbar-fixed sidebar-fixed" id="body">
    <script>
      NProgress.configure({ showSpinner: false });
      NProgress.start();
    </script>
    <!--<div id="toaster"></div>-->
    

    <!--WRAPPER-->
    <div class="wrapper">
      <!--LEFT SIDEBAR WITH OUT FOOTER-->
      <aside class="left-sidebar sidebar-dark" id="left-sidebar">
        <div id="sidebar" class="sidebar sidebar-with-footer">

          <!-- Aplication Brand -->
          <div class="app-brand">
            <a href="{% url 'dashboard' %}">
              <img src="{% static 'images/glacierlogo.png' %}" alt="Mono" height = 40px width = 40px >
              <span class="brand-name">Glacier Timesheet</span>
            </a>
          </div>

          <!-- begin sidebar scrollbar -->
          <div class="sidebar-left" data-simplebar style="height: 100%;">
            <!-- sidebar menu -->
            <ul class="nav sidebar-inner" id="sidebar-menu">
              
                <!--Dashboard-->
                <li
                  class="active"
                  >
                  <a class="sidenav-item-link" href="{% url 'dashboard' %}">
                    <i class="fa-solid fa-table-columns"></i>
                    <span class="nav-text">Dashboard</span>
                  </a>
                </li>

                <li class="section-title">
                  Apps
                </li>

                <!--Worklog-->                 
                <li
                  >
                  <a class="sidenav-item-link" href="{% url 'worklog' %}">
                    <i class="fa-solid fa-list-check"></i>
                    <span class="nav-text">Worklog</span>
                  </a>
                </li>
              
                <!--Attendance-->                 
                <li  class="has-sub" >
                  <a class="sidenav-item-link" href="javascript:void(0)" data-toggle="collapse" data-target="#attendance"
                    aria-expanded="false" aria-controls="email">
                    <i class="fa-solid fa-clipboard-user"></i>
                    <span class="nav-text">Attendance</span> <b class="caret"></b>
                  </a>
                  <ul  class="collapse"  id="attendance"
                    data-parent="#sidebar-menu">
                    <div class="sub-menu">
                      
                          <li >
                            <a class="sidenav-item-link" href="{% url 'attendance' %}">
                              <span class="nav-text">Attendance</span>
                            </a>
                          </li>
                        
                          <li >
                            <a class="sidenav-item-link" href="{% url 'leavedetails' %}">
                              <span class="nav-text">PTO</span>
                              
                            </a>
                          </li>
                        
                    </div>
                  </ul>
                </li>

                <li class="section-title">
                  Works
                </li>
                <!--Task-->                 
                {% comment %} <li  class="has-sub" >
                  <a class="sidenav-item-link" href="javascript:void(0)" data-toggle="collapse" data-target="#task"
                    aria-expanded="false" aria-controls="email">
                    <i class="fa-solid fa-bars-progress"></i>
                    <span class="nav-text">Task</span> <b class="caret"></b>
                  </a>
                  <ul  class="collapse"  id="task"
                    data-parent="#sidebar-menu">
                    <div class="sub-menu">
                      
                          <!--<li >
                            <a class="sidenav-item-link" href="#">
                              <span class="nav-text">Project</span>
                              
                            </a>
                          </li>-->
                        
                          <li >
                            <a class="sidenav-item-link" href="{% url 'task' %}">
                              <span class="nav-text">Task</span>
                              
                            </a>
                          </li>
                        
                    </div>
                  </ul>
                </li> {% endcomment %}
                <li
                  >
                  <a class="sidenav-item-link" href="{% url 'task' %}">
                    <i class="fa-solid fa-list-check"></i>
                    <span class="nav-text">Task</span>
                  </a>
                </li>

                <li class="section-title">
                  Manage
                </li>
                <!--Accounts-->                 
                <li  class="has-sub" >
                  <a class="sidenav-item-link" href="javascript:void(0)" data-toggle="collapse" data-target="#accounts"
                    aria-expanded="false" aria-controls="email">
                    <i class="fa-solid fa-file-invoice"></i>
                    <span class="nav-text">Accounts</span> <b class="caret"></b>
                  </a>
                  <ul  class="collapse"  id="accounts"
                    data-parent="#sidebar-menu">
                    <div class="sub-menu">
                      
                          <li >
                            <a class="sidenav-item-link" href="#">
                              <span class="nav-text">Users</span>
                              
                            </a>
                          </li>
                        
                          <li >
                            <a class="sidenav-item-link" href="#">
                              <span class="nav-text">Company</span>
                              
                            </a>
                          </li>

                          <li >
                            <a class="sidenav-item-link" href="#">
                              <span class="nav-text">Customers</span>
                              
                            </a>
                          </li>
                        
                    </div>
                  </ul>
                </li>

                <!--Reports-->                 
                <li  class="has-sub" >
                  <a class="sidenav-item-link" href="javascript:void(0)" data-toggle="collapse" data-target="#reports"
                    aria-expanded="false" aria-controls="email">
                    <i class="fa-regular fa-flag"></i>
                    <span class="nav-text">Reports</span> <b class="caret"></b>
                  </a>
                  <ul  class="collapse"  id="reports"
                    data-parent="#sidebar-menu">
                    <div class="sub-menu">
                      
                          <li >
                            <a class="sidenav-item-link" href="{% url 'report' %}">
                              <span class="nav-text">Attendance Report</span>
                              
                            </a>
                          </li>

                          <li >
                            <a class="sidenav-item-link" href="{% url 'logreport' %}">
                              <span class="nav-text">Log Report</span>
                              
                            </a>
                          </li>
                        
                          <li >
                            <a class="sidenav-item-link" href="#">
                              <span class="nav-text">Invoice</span>
                              
                            </a>
                          </li>

                    </div>
                  </ul>
                </li>
              </ul>
          </div>

          <!--Left sidebar Footer-->
            <div class="sidebar-footer  " >
              <div class="sidebar-footer-content d-flex align-items-center p-4" style="height: 40px; ">
                  <p style="color:white;">Logged In As : {{user.username}}</P>
              </div>
            </div>

        </div>
      </aside>

      <!--PAGE WRAPPER-->
      <div class="page-wrapper">
        <!-- Header -->
        <header class="main-header" id="header">
          <nav class="navbar navbar-expand-lg navbar-light" id="navbar">
            <!-- Sidebar toggle button -->
            <button id="sidebar-toggler" class="sidebar-toggle">
              <span class="sr-only">Toggle navigation</span>
            </button>

            <span class="page-title">{% block page-title %}Dashboard{% endblock page-title %}</span>

           <div class="navbar-right">
               <ul class="nav navbar-nav">

                    <!-- Notification -->
                      {% if user.is_authenticated %}
                      <li class="custom-dropdown">
                        <button class="notify-toggler custom-dropdown-toggler">
                          <i class="mdi mdi-bell-outline icon"></i>
                          {% if unseen_notification_count > 0 %}
                            <span class="badge badge-xs rounded-circle bg-danger">
                              {{ unseen_notification_count }}
                            </span>
                          {% endif %}
                        </button>

                        <div class="dropdown-notify">
                          <header>
                            <div class="nav nav-underline" id="nav-tab" role="tablist">
                              <a class="nav-item nav-link" id="all-tabs" href="{% url 'worklog' %}">
                                Worklog Review
                              </a>
                            </div>
                          </header>

                          <ul class="list-unstyled p-2">
                            {% for notification in recent_notifications %}
                              <li>
                                <small class="text-muted">{{ notification.created_at|date:"M d, H:i" }}</small><br>
                                {{ notification.message }}
                              </li>
                            {% empty %}
                              <li class="text-muted">No new notifications</li>
                            {% endfor %}
                          </ul>
                        </div>
                      </li>
                      {% endif %}






                    <!-- User Account -->
                    <li class="dropdown user-menu">
                      <button class="dropdown-toggle nav-link" data-toggle="dropdown">
                        <img src="{% static 'images/usericon.png' %}" class="user-image rounded-circle" alt="User Image" />
                        <span class="d-none d-lg-inline-block">{{ user.username }}</span>
                      </button>

                      <ul class="dropdown-menu dropdown-menu-right">
                        <li>
                          <a class="dropdown-link-item" href="user-profile.html">
                            <i class="mdi mdi-account-outline"></i>
                            <span class="nav-text">My Profile</span>
                          </a>
                        </li>
                        <li>
                          <a class="dropdown-link-item" href="email-inbox.html">
                            <i class="mdi mdi-email-outline"></i>
                            <span class="nav-text">Messages</span>
                            <span class="badge badge-pill badge-primary">24</span>
                          </a>
                        </li>
                        <li>
                          <a class="dropdown-link-item" href="user-activities.html">
                            <i class="mdi mdi-diamond-stone"></i>
                            <span class="nav-text">Activities</span>
                          </a>
                        </li>
                        <li>
                          <a class="dropdown-link-item" href="user-account-settings.html">
                            <i class="mdi mdi-settings"></i>
                            <span class="nav-text">Account Settings</span>
                          </a>
                        </li>
                        <li class="dropdown-footer">
                          <a class="dropdown-link-item" href="{% url 'logout' %}">
                            <i class="mdi mdi-logout"></i> Log Out
                          </a>
                        </li>
                      </ul>
                    </li>

                  </ul>
                </div>

          </nav>


        </header>

        <!--for main content-->
        {% block content %}

        {% endblock %}

        <!-- Footer -->
        <footer class="footer mt-auto" >
          <div class="copyright bg-white d-flex align-items-center justify-content-center">
            <p>
              &copy; Copyright <strong><span>Glacier Systems Inc.</span></strong>. All Rights Reserved 
            </p>
          </div>
        </footer>
      </div>
    </div>

    <!--Scripts of Template -->
      <script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>
      <script src="{% static 'plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
      <script src="{% static 'plugins/simplebar/simplebar.min.js' %}"></script>
      <!-- <script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script> -->
      <script src="{% static 'plugins/apexcharts/apexcharts.js' %}"></script>
      <script src="{% static 'plugins/DataTables/DataTables-1.10.18/js/jquery.dataTables.min.js' %}"></script>
      <script src="{% static 'plugins/jvectormap/jquery-jvectormap-2.0.3.min.js' %}"></script>
      <script src="{% static 'plugins/jvectormap/jquery-jvectormap-world-mill.js' %}"></script>
      <script src="{% static 'plugins/jvectormap/jquery-jvectormap-us-aea.js' %}"></script>
      <script src="{% static 'plugins/daterangepicker/moment.min.js' %}"></script>
      <script src="{% static 'plugins/daterangepicker/daterangepicker.js' %}"></script>
      <script>
        jQuery(document).ready(function() {
          jQuery('input[name="dateRange"]').daterangepicker({
          autoUpdateInput: false,
          singleDatePicker: true,
          locale: {
            cancelLabel: 'Clear'
          }
        });
          jQuery('input[name="dateRange"]').on('apply.daterangepicker', function (ev, picker) {
            jQuery(this).val(picker.startDate.format('MM/DD/YYYY'));
          });
          jQuery('input[name="dateRange"]').on('cancel.daterangepicker', function (ev, picker) {
            jQuery(this).val('');
          });
        });
      </script>
      <script>
        $(document).ready(function () {
          $('.notify-toggler').on('click', function () {
            $.ajax({
              url: '{% url "mark_notifications_seen" %}',
              method: 'GET',
              success: function (response) {
                if (response.status === 'ok') {
                  $('.badge.bg-danger').remove();  
                } 
              }
            });
          });
        });
      </script>
      <!-- <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script> -->
      <script src="{% static 'plugins/toaster/toastr.min.js' %}"></script>
      <script src="{% static 'js/mono.js' %}"></script>
      <script src="{% static 'js/chart.js' %}"></script>
      <script src="{% static 'js/map.js' %}"></script>
      <script src="{% static 'js/custom.js' %}"></script>
      <!--for multiple select-->
      <script src="{% static 'plugins/prism/prism.js' %}"></script>
      <script src="{% static 'plugins/select2/js/select2.min.js' %}"></script>
      <script src="{% static 'plugins/jquery-mask-input/jquery.mask.min.js' %}"></script>

      <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->
      
  </body>
</html>
